<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关于 - Podevus</title>
    <link rel="icon" type="image/x-icon" href="logo.ico">
    <style>
/* =========================================
   1. 基础配置
   ========================================= */
:root {
    /* 表世界 - 浅色模式 */
    --primary-bg: #faf8f3;
    --text-primary: #2d2520;
    --text-secondary: #5a504a;
    --accent-color: #c89b6d;
    --border-dark: #d4c4b0;
    --card-bg: #ffffff;
    --shadow-color: rgba(45, 37, 32, 0.08);
    
    /* 里世界 (Prima Doll 风格) */
    --steam-bg: #1a0f0a;
    --steam-gold: #c89b6d;
    --steam-gold-dim: #8b5a2b;
    --steam-text: #f5e6d3;
    
    --font-serif: "Noto Serif JP", "Source Han Serif CN", Georgia, serif;
    --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", sans-serif;
    
    /* 动画配置 */
    --transition-speed: 0.8s;
}

/* 深色模式适配 (仅影响表世界) */
@media (prefers-color-scheme: dark) {
    :root {
        --primary-bg: #1a1816;
        --text-primary: #e8e6e3;
        --text-secondary: #c4bfb8;
        --border-dark: #4a4440;
        --card-bg: #242220;
    }
}

/* 里世界强制覆盖 (激活时生效) */
body.world-inner {
    --primary-bg: var(--steam-bg) !important;
    --text-primary: var(--steam-text) !important;
    --text-secondary: #c4bfb8 !important;
    --card-bg: rgba(44, 24, 16, 0.4) !important;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html, body, a, button, input, textarea { cursor: none !important; }

body {
    font-family: var(--font-sans);
    line-height: 1.8;
    color: var(--text-primary);
    background: var(--primary-bg);
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    transition: background-color var(--transition-speed) ease;
    overflow-x: hidden;
    min-height: 100vh;
}

/* 背景纹理 */
body::before {
    content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: repeating-linear-gradient(0deg, transparent, transparent 2px, var(--shadow-color) 2px, var(--shadow-color) 4px);
    opacity: 0.03; pointer-events: none; z-index: -1;
}

/* =========================================
   2. Header & 齿轮 (您喜欢的转动效果)
   ========================================= */
header {
    border-bottom: 2px solid var(--border-dark); padding-bottom: 30px; margin-bottom: 30px; position: relative;
    transition: border-color 0.5s;
}
h1 { font-family: var(--font-serif); font-size: 2.5em; font-weight: 500; margin-bottom: 12px; }
h1 a { color: inherit; text-decoration: none; }
.subtitle { font-family: var(--font-serif); font-size: 1.15em; color: var(--text-secondary); letter-spacing: 0.3em; margin-left: 0.15em; }

nav { margin-top: 25px; display: flex; flex-wrap: wrap; gap: 10px 30px; }
nav a { color: var(--text-secondary); text-decoration: none; position: relative; padding: 5px 0; transition: color 0.3s ease; }
nav a:hover, nav a.active { color: var(--accent-color); }

/* 齿轮容器 */
.gear-switch-wrapper {
    display: flex; flex-direction: column; align-items: center;
    margin: 20px 0 40px; position: relative; z-index: 100;
}

/* 齿轮本体 */
.gear-btn {
    width: 70px; height: 70px;
    background: transparent; border: none;
    color: var(--accent-color);
    transition: color 0.3s ease;
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
}
.gear-btn svg { width: 100%; height: 100%; fill: currentColor; }

/* 状态1: 上发条动画 (Winding) - 剧烈回弹 */
.gear-btn.winding {
    animation: windUp 1s cubic-bezier(0.5, -0.5, 0.5, 1.5) forwards;
    color: var(--steam-gold);
}
/* 状态2: 锁定状态 (Locked) */
.gear-btn.locked {
    transform: rotate(360deg);
    color: var(--steam-gold);
    filter: drop-shadow(0 0 15px var(--steam-gold));
}

@keyframes windUp {
    0% { transform: rotate(0deg); }
    70% { transform: rotate(400deg); } /* 过充 */
    85% { transform: rotate(340deg); } /* 回弹 */
    100% { transform: rotate(360deg); } /* 锁定 */
}

.gear-hint {
    margin-top: 15px; font-family: var(--font-serif); font-size: 0.9em;
    letter-spacing: 0.2em; color: var(--text-secondary); opacity: 0.7; transition: all 0.5s ease;
}
body.world-inner .gear-hint { color: var(--steam-gold); text-shadow: 0 0 5px var(--steam-gold); }

/* =========================================
   3. 世界切换逻辑 (您想要的平滑过渡)
   ========================================= */
.world-container { position: relative; min-height: 60vh; }

/* 表世界 (About) */
.content-surface {
    opacity: 1; 
    transform: translateY(0) scale(1);
    transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);
    transform-origin: top center;
}

/* 里世界 (Comments) */
.content-inner {
    position: absolute; top: 0; left: 0; width: 100%;
    opacity: 0; pointer-events: none;
    transform: translateY(100px) scale(0.95);
    transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);
}

/* 激活状态 */
body.world-inner .content-surface {
    opacity: 0; 
    transform: translateY(-50px) scale(0.95); 
    pointer-events: none; position: absolute;
}
body.world-inner .content-inner {
    position: relative; opacity: 1; pointer-events: auto; 
    transform: translateY(0) scale(1);
}

/* =========================================
   4. 表世界样式 (原样保留)
   ========================================= */
.about-content {
    background: var(--card-bg);
    padding: 40px; border-radius: 8px; border: 1px solid var(--border-light);
    box-shadow: 0 2px 8px var(--shadow-color); margin-bottom: 40px;
    transition: background 0.3s ease;
}
.about-content h2 {
    font-family: var(--font-serif); font-size: 1.8em; font-weight: 500; margin-bottom: 20px;
    border-bottom: 2px solid var(--border-light); padding-bottom: 10px;
}
.music-player-entry {
    background: linear-gradient(135deg, #1a1614 0%, #2d2520 100%);
    border: none; padding: 18px 45px; color: var(--accent-color);
    font-family: var(--font-sans); letter-spacing: 0.2em; text-transform: uppercase;
    font-weight: 600; display: inline-flex; align-items: center; gap: 15px;
    clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px));
    box-shadow: 0 0 0 2px var(--accent-color); transition: all 0.3s ease;
}
.music-player-entry:hover { transform: translateY(-3px); box-shadow: 0 0 0 2px var(--accent-hover); }
.music-player-entry svg { width: 24px; height: 24px; fill: currentColor; }

/* =========================================
   5. 里世界评论区 (严格还原截图 UI)
   ========================================= */
/* 粒子 (仅保留简单背景粒子) */
.particles-bg, .particles-fg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; z-index: 0; opacity: 0; transition: opacity 1s ease;
}
body.world-inner .particles-bg, body.world-inner .particles-fg { opacity: 1; }
.particle {
    position: absolute; border-radius: 50%;
    background: radial-gradient(circle, rgba(200, 155, 109, 0.8), transparent 70%);
    animation: floatUp linear infinite;
}
@keyframes floatUp {
    0% { transform: translateY(0) scale(0.5); opacity: 0; }
    100% { transform: translateY(-100vh) scale(1.2); opacity: 0; }
}

.steampunk-comments {
    position: relative; z-index: 5; padding: 20px 0; max-width: 900px; margin: 0 auto;
}
.section-title {
    font-family: var(--font-serif); font-size: 2em; color: var(--steam-gold);
    margin-bottom: 40px; text-align: center; text-shadow: 0 0 10px rgba(200,155,109,0.3);
}

/* -------------------------------------------
   UI 还原核心：评论表单
   ------------------------------------------- */
.comment-form-section {
    position: relative; padding: 40px; margin-top: 40px;
    border: 1px solid var(--steam-gold); /* 金色边框 */
    border-radius: 4px;
    background: rgba(30, 15, 10, 0.3); /* 深色背景 */
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
}
/* 双重边框装饰 */
.comment-form-section::before {
    content: ''; position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px;
    border: 1px solid rgba(200, 155, 109, 0.3); pointer-events: none;
}

.form-title {
    font-family: var(--font-serif); font-size: 1.8em; color: var(--steam-gold);
    margin-bottom: 30px; text-align: center;
}

/* 3列布局 */
.form-row-3 {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 25px;
}
.form-group label {
    display: block; color: #d4a574; font-weight: bold; font-size: 0.95em; margin-bottom: 8px;
}
.form-group label::after { content: ' *'; color: #b43232; }
.form-group label.opt::after { content: ' (optional)'; color: #888; font-weight: normal; font-size: 0.85em; }

/* 输入框 (截图样式) */
.steam-input {
    width: 100%;
    background: rgba(0, 0, 0, 0.3); /* 深色背景 */
    border: 1px solid var(--steam-gold-dim);
    padding: 12px; color: var(--steam-text);
    font-family: inherit; font-size: 1em; transition: all 0.3s ease;
}
.steam-input:focus {
    outline: none; border-color: var(--steam-gold); background: rgba(0, 0, 0, 0.5);
    box-shadow: 0 0 8px rgba(200, 155, 109, 0.3);
}
.comment-textarea { width: 100%; min-height: 150px; resize: vertical; margin-bottom: 20px; }

/* 红色 Cancel 按钮 (截图2) */
.reply-notice {
    margin-bottom: 20px; font-size: 1em; color: #fff; display: flex; align-items: center; gap: 10px;
}
.reply-notice.hidden { display: none; }
.cancel-reply-btn {
    background: transparent; border: 1px solid #b43232; color: #ff8888;
    padding: 2px 8px; font-size: 0.8em; text-transform: uppercase; transition: all 0.3s;
}
.cancel-reply-btn:hover { background: #b43232; color: #fff; }

/* 提交按钮 (切角) */
.submit-btn {
    width: 100%; padding: 15px;
    background: linear-gradient(to bottom, #c89b6d, #a67c52);
    color: #1a0f0a; font-weight: bold; font-size: 1.1em; border: none;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
    transition: filter 0.3s ease, transform 0.2s;
}
.submit-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }

/* 历史评论卡片 */
.comment-card {
    background: rgba(44, 24, 16, 0.5);
    border: 1px solid var(--steam-gold-dim);
    padding: 20px; margin-bottom: 20px; position: relative;
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
}
.comment-header { display: flex; gap: 15px; margin-bottom: 10px; border-bottom: 1px dashed rgba(200,155,109,0.3); padding-bottom: 10px; }
.comment-avatar img { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--steam-gold); }
.comment-author { color: var(--steam-gold); font-weight: bold; }
.comment-time { color: #888; font-size: 0.85em; margin-left: auto; }

/* =========================================
   6. 光标与杂项
   ========================================= */
.custom-cursor {
    width: 32px; height: 32px; position: fixed; pointer-events: none; z-index: 10000;
    background-image: url('category/cursor-custom-transparent.png');
    background-size: contain; background-repeat: no-repeat;
    transition: transform 0.1s;
}
body.world-inner .custom-cursor { filter: invert(1) sepia(1); }

.cursor-ripple {
    position: fixed; border: 2px solid var(--accent-color); border-radius: 50%;
    pointer-events: none; z-index: 9998; animation: ripple 0.6s ease-out; opacity: 0;
}
@keyframes ripple { 0% { width: 20px; height: 20px; opacity: 1; } 100% { width: 80px; height: 80px; opacity: 0; } }

footer {
    margin-top: 80px; padding-top: 30px; border-top: 2px solid var(--border-dark);
    text-align: center; color: var(--text-muted); position: relative;
}

@media (max-width: 768px) {
    .form-row-3 { grid-template-columns: 1fr; }
    .custom-cursor { display: none; }
    html, body, * { cursor: auto !important; }
}
    </style>
</head>
<body>

    <header>
        <h1><a href="index.html">Podevus</a></h1>
        <p class="subtitle">記 · 思 · 道</p>
        <nav>
            <a href="index.html">首页</a>
            <a href="category/Blog_category_tech.html">技术</a>
            <a href="category/Blog_category_reading.html">读书</a>
            <a href="category/Blog_category_anime.html">幻想</a>
            <a href="category/Blog_category_thinking.html">思考</a>
            <a href="Blog_about.html" class="active">关于</a>
        </nav>
    </header>

    <div class="gear-switch-wrapper">
        <button class="gear-btn" id="worldToggle" onclick="startSequence()" aria-label="切换世界">
            <svg viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
        </button>
        <div class="gear-hint" id="worldLabel">SWITCH TO DEPTH</div>
    </div>

    <main class="world-container">
        <div class="content-surface" id="surfaceWorld">
            <div class="about-content">
                <h2>关于本站</h2>
                <p><strong>Podevus V2.1</strong></p>
                <p>欢迎来到 Podevus，这是一个记录思考、分享观点的个人空间。</p>
                <p>在这里，我会分享关于技术、阅读、动画作品以及日常思考的文章。希望这些文字能够引发一些共鸣，或者至少给你带来片刻的思考。</p>
                <p>本站采用极简设计理念，融合大正浪漫时代的优雅美学，旨在让内容本身成为焦点。</p>
            </div>
            <div class="about-content">
                <h2>关于作者</h2>
                <p>一个思考、记录的普通人。</p>
                <p>事物值得被记录和分享。</p>
            </div>
            <div class="about-content">
                <h2>设计理念</h2>
                <p><strong>存质</strong> —— 这是本站的设计哲学。</p>
                <p>正如 Prima Doll 中那个理想化的世界，我们保留那个时代所有迷人的视觉元素，却巧妙地剥离了真实历史中的压迫、创伤和社会黑暗面。</p>
            </div>
            <div class="about-content music-entry-section">
                <h2>音乐空间</h2>
                <div style="text-align: center; margin-top: 25px;">
                    <button class="music-player-entry" onclick="openMusicPlayer()">
                        <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
                        <span>打开音乐播放器</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="content-inner" id="innerWorld">
            <div class="steampunk-comments">
                <h2 class="section-title">Visitors' Echo</h2>

                <div class="comments-history-section">
                    <div class="comments-count" id="commentsCount">0 Replies</div>
                    <div id="commentsList">
                        <div class="comments-loading" style="text-align:center;color:#888;">Searching frequency...</div>
                    </div>
                </div>

                <div class="comment-form-section" id="respond">
                    <h3 class="form-title">Leave a Reply</h3>
                    
                    <div class="reply-notice hidden" id="replyNotice">
                        <span>Replying to <span id="replyToName" style="color:var(--steam-gold); font-weight:bold;"></span></span>
                        <button type="button" class="cancel-reply-btn" onclick="cancelReply()">Cancel</button>
                    </div>

                    <form id="commentForm">
                        <input type="hidden" id="replyPid"><input type="hidden" id="replyRid"><input type="hidden" id="replyAt">
                        
                        <div class="form-row-3">
                            <div class="form-group">
                                <label for="nameInput">Name</label>
                                <input type="text" id="nameInput" class="steam-input" required>
                            </div>
                            <div class="form-group">
                                <label for="emailInput">Email</label>
                                <input type="email" id="emailInput" class="steam-input" required>
                            </div>
                            <div class="form-group">
                                <label for="websiteInput" class="opt">Website</label>
                                <input type="url" id="websiteInput" class="steam-input">
                            </div>
                        </div>
                        
                        <textarea class="steam-input comment-textarea" id="commentTextarea" placeholder="Share your thoughts..." required></textarea>
                        
                        <div style="margin-bottom: 20px; color: #aaa; font-size: 0.9em; display:flex; align-items:center; gap:8px;">
                            <input type="checkbox" id="notify" style="width:auto; cursor:none;">
                            <label for="notify" style="margin:0; font-weight:normal; color:#aaa;">Notify me of follow-up replies by email.</label>
                        </div>

                        <button type="submit" class="submit-btn" id="submitBtn">Post Comment</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>© 2025 Podevus</p>
        <p>存质</p>
    </footer>
    
    <div class="particles-bg" id="particlesBg"></div>
    <div class="particles-fg" id="particlesFg"></div>

    <script>
    (function(){const isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(isMobile)return;const c=document.createElement('div');c.className='custom-cursor';document.body.appendChild(c);document.addEventListener('mousemove',e=>{c.style.left=e.clientX+'px';c.style.top=e.clientY+'px';});document.addEventListener('mousedown',e=>{const r=document.createElement('div');r.className='cursor-ripple';r.style.left=e.clientX+'px';r.style.top=e.clientY+'px';r.style.transform='translate(-50%,-50%)';document.body.appendChild(r);setTimeout(()=>r.remove(),600);});document.querySelectorAll('a,button,input,textarea').forEach(el=>{el.addEventListener('mouseenter',()=>c.style.transform='scale(1.2)');el.addEventListener('mouseleave',()=>c.style.transform='scale(1)');});})();
    </script>

    <script>
    let isInnerWorld = false;
    let isAnimating = false;
    const gearBtn = document.getElementById('worldToggle');
    const label = document.getElementById('worldLabel');
    // 如果有音效文件，请放在 assets/windup.mp3
    // const audio = new Audio('assets/windup.mp3'); 

    function startSequence() {
        if (isAnimating) return;
        isAnimating = true;

        if (!isInnerWorld) {
            // === 切换到里世界 ===
            // 1. 齿轮上发条转动 (保留您喜欢的)
            gearBtn.classList.add('winding');
            label.textContent = "ENGAGING...";
            // if(audio) audio.play().catch(()=>{});

            // 2. 动画结束后切换 (恢复平滑过渡)
            setTimeout(() => {
                gearBtn.classList.remove('winding');
                gearBtn.classList.add('locked'); // 停在转动后的位置
                
                document.body.classList.add('world-inner');
                label.textContent = "RETURN TO SURFACE";
                
                startParticles();
                loadComments();
                isAnimating = false;
            }, 1000); // 1秒后切换
        } else {
            // === 返回表世界 ===
            gearBtn.classList.add('winding'); // 反向或重新转动
            
            setTimeout(() => {
                gearBtn.classList.remove('winding');
                gearBtn.classList.remove('locked');
                
                document.body.classList.remove('world-inner');
                label.textContent = "SWITCH TO DEPTH";
                
                stopParticles();
                isAnimating = false;
            }, 1000);
        }
        isInnerWorld = !isInnerWorld;
    }

    // ============ 2. 粒子逻辑 (保留基础粒子) ============
    function createP(con, isFg) {
        if (!isInnerWorld) return;
        const p = document.createElement('div'); p.className = 'particle';
        const s = Math.random()*(isFg?8:4)+2;
        p.style.width=s+'px'; p.style.height=s+'px'; p.style.left=Math.random()*100+'%';
        const d = Math.random()*10+5; p.style.animationDuration=d+'s';
        con.appendChild(p); setTimeout(()=>p.remove(), d*1000);
    }
    let pInt = [];
    function startParticles() {
        const bg = document.getElementById('particlesBg');
        const fg = document.getElementById('particlesFg');
        pInt.push(setInterval(()=>createP(bg,false), 1000));
        pInt.push(setInterval(()=>createP(fg,true), 2000));
    }
    function stopParticles() {
        pInt.forEach(clearInterval); pInt = [];
        document.getElementById('particlesBg').innerHTML='';
        document.getElementById('particlesFg').innerHTML='';
    }

    // ============ 3. Waline 逻辑 (路径分离 + 还原) ============
    const WALINE_SERVER = 'https://podevuscomments.vercel.app';
    const PATH = window.location.pathname; // 确保评论不串台
    let loaded = false;

    async function loadComments() {
        if (loaded) return;
        const list = document.getElementById('commentsList');
        try {
            const res = await fetch(`${WALINE_SERVER}/comment?path=${encodeURIComponent(PATH)}&pageSize=50`);
            const data = await res.json();
            const cmts = (data.data && data.data.data) ? data.data.data : [];
            document.getElementById('commentsCount').innerText = (data.data.count || cmts.length) + ' Replies';
            
            if (cmts.length > 0) {
                list.innerHTML = cmts.map(renderC).join('');
                bindReply();
            } else {
                list.innerHTML = '<div style="text-align:center;padding:20px;color:#888;">Be the first to leave a message.</div>';
            }
            loaded = true;
        } catch(e) { list.innerHTML = 'Signal Lost.'; }
    }

    function renderC(c) {
        const date = new Date(c.insertedAt).toLocaleString();
        const ava = c.avatar || `https://www.gravatar.com/avatar/${c.mail_md5}?d=mp`;
        const child = (c.children && c.children.length) ? 
            `<div style="margin-left:20px;border-left:1px solid #c89b6d;padding-left:15px;margin-top:10px;">${c.children.map(renderC).join('')}</div>` : '';
        
        return `
            <div class="comment-card">
                <div class="comment-header">
                    <div class="comment-avatar"><img src="${ava}"></div>
                    <div>
                        <div class="comment-author">${c.nick}</div>
                        <div class="comment-time">${date}</div>
                    </div>
                </div>
                <div style="color:var(--steam-text);">${c.comment}</div>
                <button class="reply-btn" style="background:none;border:none;color:#c89b6d;cursor:none;margin-top:10px;font-size:0.9em;" 
                    data-id="${c.objectId}" data-nick="${c.nick}" data-rid="${c.rid||c.objectId}">[Reply]</button>
                ${child}
            </div>
        `;
    }

    function bindReply() {
        document.querySelectorAll('.reply-btn').forEach(b => {
            b.addEventListener('click', () => {
                document.getElementById('replyPid').value = b.dataset.id;
                document.getElementById('replyRid').value = b.dataset.rid;
                document.getElementById('replyAt').value = b.dataset.nick;
                document.getElementById('replyToName').innerText = '@' + b.dataset.nick;
                document.getElementById('replyNotice').classList.remove('hidden');
                document.getElementById('respond').scrollIntoView({ behavior:'smooth' });
            });
        });
    }
    
    window.cancelReply = function() {
        document.getElementById('replyPid').value = '';
        document.getElementById('replyNotice').classList.add('hidden');
    }

    document.getElementById('commentForm').addEventListener('submit', async(e)=>{
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.innerText = 'Posting...'; btn.disabled = true;
        try {
            await fetch(`${WALINE_SERVER}/comment`, {
                method:'POST', headers:{'Content-Type':'application/json'},
                body: JSON.stringify({
                    nick: document.getElementById('nameInput').value,
                    mail: document.getElementById('emailInput').value,
                    link: document.getElementById('websiteInput').value,
                    comment: document.getElementById('commentTextarea').value,
                    path: PATH,
                    pid: document.getElementById('replyPid').value,
                    rid: document.getElementById('replyRid').value,
                    at: document.getElementById('replyAt').value,
                    url: window.location.href
                })
            });
            alert('Message Sent.');
            document.getElementById('commentTextarea').value='';
            cancelReply(); loaded=false; loadComments();
        } catch(e) { alert('Error.'); }
        btn.innerText='Post Comment'; btn.disabled=false;
    });
    </script>
    <script src="assets/music-player.js"></script>
</body>
</html>